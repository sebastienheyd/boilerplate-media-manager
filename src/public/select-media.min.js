$(function(){$(document).on("click",".btn-select-image, .btn-select-file",function(){$("body").css("overflow","hidden").append('<div id="select-media-bg"><div id="select-media-wrapper"><div id="select-media-close">File manager<span class="fa fa-times text-muted"></span></div><iframe src="'+$(this).data("src")+"&selected="+$("input[data-id="+$(this).data("field")+"]").val()+'"></iframe></div></div>')}),$(document).on("click","#select-media-close span",function(){$("#select-media-bg").remove()}),$(document).on("click",".select-image-view",function(e){e.preventDefault(),window.open($(this).closest(".select-image-wrapper").find("input").val())}),$(document).on("click",".select-image-edit",function(e){e.preventDefault(),$(this).closest(".select-image-wrapper").find(".btn-select-image").trigger("click")}),$(document).on("click",".select-image-delete",function(e){e.preventDefault();var t=$(this).closest(".select-image-wrapper");bootbox.confirm(selectMediaLocales.confirm,function(e){!1!==e&&(t.removeClass("editable"),t.find("input").val(""),t.find(".btn-select-image").html('<span class="fa fa-image fa-3x"></span>'))})}),window.onmessage=function(e){"insertMedia"===e.data.action&&($("input[data-id="+e.data.field+"]").val(e.data.url),"image"===e.data.type&&($("button[data-field="+e.data.field+"]").html('<img src="'+e.data.url+'" />'),$("button[data-field="+e.data.field+"]").parent().addClass("editable")),$("#select-media-bg").remove(),$("body").css("overflow","auto"))}});
